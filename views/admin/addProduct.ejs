<%- include('../layouts/header.ejs') %>
<style>
  #previewContainer img{
    height: 100px;
    width: 100px;
    margin: 1rem;
  }
</style>
<section class="vh-200" style="background-image: url('https://mdbcdn.b-cdn.net/img/Photos/new-templates/search-box/img4.webp');">
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12 col-md-8 col-lg-6 col-xl-5">
          <div class="card shadow-2-strong" style="border-radius: 1rem;">
            <div class="card-body p-5 text-center">
  
              <h3 class="mb-5">Add Product</h3>

              <form action="/admin/add-product" method="post" enctype="multipart/form-data"> 
                <div class="form-outline mb-4">
                    <input type="text" name="name" id="typeEmailX-2" class="form-control form-control-lg" placeholder="Enter name" required/>
                    <label class="form-label" for="typeEmailX-2">Product Name</label>
                  </div>

               <div class="form-outline mb-4">
                <input type="number" name="price"  id="typeEmailX-2" class="form-control form-control-lg" placeholder="Enter price" required/>
                <label class="form-label" for="typeEmailX-2">Price</label>
               </div>
  
              <div class="form-outline mb-4">
                <input type="text" name="meterial" id="typePasswordX-2" class="form-control form-control-lg" placeholder="Meterial" required/>
                <label class="form-label" >Meterial</label>
              </div>

              <div class="form-outline mb-4">
                <input type="text" name="description" id="typePasswordX-2" class="form-control form-control-lg" placeholder="Description" required/>
                <label class="form-label" >Discription</label>
              </div>

              <label for="gender">Gender</label>
              <select name="gender" id="gender">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Unisex">Unisex</option>
              </select>
              <br><br>
             
              <div class="form-outline mb-4">
                
                <select name="category" class="form-control">
                    <option selected>Select category</option>
                    <% if(category.length > 0){ %>
                
                        <% for(let i = 0 ;i<category.length ; i++){ %>
                           
                            <option value="<%= category[i].name %>"> <%= category[i].name %> </option>
                
                            <% } %>
                    <% } %>
                    </select>   
                    <label for="">Select Category</label>             
              </div>

              <div class="form-outline mb-4">
                <input type="text" name="stock" id="typePasswordX-2" class="form-control form-control-lg" placeholder="Stock" required/>
                <label class="form-label" >stock</label>
              </div>



              <div id="previewContainer"></div>
              <div class="form-outline mb-4" >
                <input id="x" onchange="showPreview()" type="file" name="images" class="form-control form-control-lg" placeholder="Image" accept="image/jpeg, image/png, image/gif" multiple/>
                <label class="form-label" >image</label>
              </div>
            
            
              <% if(typeof message !=='undefined' ){ %>
                <p style="color:rgb(23, 88, 25);">
                  <%=message %>
                </p>
               <% } %>

              <button class="btn btn-primary btn-lg btn-block" type="submit" value="Add product">Add Product</button>
            </form> 
            <a href="/admin/products">Go back</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

  <script>
function showPreview() {
  // Get the file input element
  var fileInput = document.getElementById('x');
  
  // Get the preview container element
  var previewContainer = document.getElementById('previewContainer');
  
  // Clear the existing previews
  previewContainer.innerHTML = '';
  
  // Loop through the selected files
  for (var i = 0; i < fileInput.files.length; i++) {
    var file = fileInput.files[i];
    
    // Create a new FileReader object to read the file
    var reader = new FileReader();
    
    // Define the onload event handler for the FileReader
    reader.onload = function(event) {
      // Create a new image element
      var img = document.createElement('img');
      
      // Set the source of the image to the result of the FileReader
      img.src = event.target.result;
      
      // Add the image element to the preview container
      previewContainer.appendChild(img);
    };
    
    // Read the file as a Data URL
    reader.readAsDataURL(file);
  }
}
 </script>

  <%- include('../layouts/footer.ejs') %>

